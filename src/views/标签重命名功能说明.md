# 标签重命名功能说明

## 📋 涉及页面

- **算法信息页面** (`algorithm/algoinfo/index.vue`)
- **人脸库页面** (`repository/face/index.vue`)
- **开放库页面** (`repository/open/index.vue`)

## 🚀 功能特性

1. ✅ **自动聚焦选中**：右键重命名后自动聚焦并选中全部文本
2. ✅ **完整鼠标支持**：点击定位光标、拖拽选择文本都正常
3. ✅ **完整键盘支持**：方向键、快捷键、复制粘贴都正常
4. ✅ **智能保存机制**：Enter键保存、点击外部保存、失焦保存
5. ✅ **事件隔离**：阻止事件冒泡，避免意外的标签页切换
6. ✅ **稳定重复使用**：支持连续重命名，资源管理正确

## 🎮 操作方式

- **开始重命名**：右键标签 → 选择"重命名"
- **保存编辑**：按 `Enter` 键 或 点击输入框外部
- **取消编辑**：按 `Esc` 键
- **文本操作**：鼠标点击、拖拽选择、键盘移动等标准操作

## 🔧 核心技术

### 1. 事件冒泡阻止

```html
<div v-else class="tab-edit-container" @click.stop>
  <ElInput @click.stop @mousedown.stop @mouseup.stop />
</div>
```

### 2. 精确区域检测

```typescript
const isInEditingArea =
  editContainer.contains(target) ||
  target.closest('.tab-edit-container') !== null ||
  target.closest('.el-input') !== null ||
  target.tagName === 'INPUT'
```

### 3. 双重保存机制

- **失焦保存**：500ms 防抖
- **点击外部保存**：800ms 防抖

### 4. 多重聚焦策略

```typescript
// 直接调用 + DOM元素聚焦 + 全选文本
if (typeof tabEditInputRef.value.focus === 'function') {
  tabEditInputRef.value.focus()
} else if (tabEditInputRef.value.$el) {
  const inputElement = tabEditInputRef.value.$el.querySelector('input')
  inputElement?.focus()
  inputElement?.select()
}
```

## 📅 版本信息

**最后更新**：2024-XX-XX  
**状态**：已完成，功能稳定  
**测试**：通过所有鼠标和键盘操作测试
